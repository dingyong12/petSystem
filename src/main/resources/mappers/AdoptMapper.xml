<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="cn.petmanagementsystem.mapper.AdoptMapper">
    <insert id="adoptPet">
        insert into adopt
            (pet_id, user_id, adopt_method)
        values (#{pet_id}, #{user_id}, #{adopt_method})
    </insert>


    <select id="queryAdoptList" resultType="cn.petmanagementsystem.domain.Adopt">
        select a.*,u.phone,p.name from adopt a left join pet p on a.pet_id = p.id
        left join user u on a.user_id = u.id
        <where>
            <if test="petName != null and petName != ''">
                and p.name like concat('%',#{p.name},'%')
            </if>
            <if test="phone != null and phone != ''">
                and u.phone = #{u.phone}
            </if>
            <if test="adopt_method != null and adopt_method != ''">
                and adopt_method = #{adopt_method}
            </if>
        </where>
    </select>


</mapper>